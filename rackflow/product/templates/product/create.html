{% extends "base.html" %}
{% load static %}


{% block content %}
<!-- <div class="h-dvh flex flex-row justify-center mt-8 sm:items-center"> -->
<!--     <form method="POST" class="flex flex-col w-full max-w-2xl sm:shadow-gray-300 sm:shadow-2xl p-8 gap-12 text-gray-900 sm:rounded-2xl"> -->
<!--         {{ form.non_field_errors }} -->
<!--         {% csrf_token %} -->
<!--         {% for field in form %} -->
<!--             <div class="w-full flex flex-row items-center "> -->
<!--                 <div class="font-semibold w-1/3"> -->
<!--                 {{ field.label_tag }} -->
<!--                 </div> -->
<!--                 <div class="w-2/3 rounded-2xl"> -->
<!--                 {{ field }} -->
<!--                 </div> -->
<!--             </div> -->
<!--             {{ field.errors }} -->
<!--         {% endfor %} -->
<!--         <button class="bg-[var(--primary)] hover:bg-[var(--primary-dark)] py-3 rounded-2xl"> Add </button> -->
<!--     </form> -->
<!-- </div> -->
<main class="flex-1 container mx-auto px-4 sm:px-6 py-8">
    <div
        class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8"
    >
        <h2
            class="text-2xl sm:text-3xl font-semibold text-gray-800 mb-4 sm:mb-0 relative expand-underline"
        >
            Create Product
        </h2>
    </div>

    <div class="bg-white p-8 rounded-xl shadow-lg">
        {{ form.non_field_errors }}
        <form id="xD" class="space-y-6" method="post" enctype="multipart/form-data">
            {% csrf_token %} 
            {% for field in form %} 
            {% if field.field.widget.input_type == 'file' %}
            <div>
                <label
                    class="block text-sm font-medium text-gray-700 mb-1"
                    for="productImage"
                >Product Image</label
                >
                <div
                    class="mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg"
                >
                    <div class="space-y-1 text-center">
                        <span id="image-placeholder" class="material-icons text-gray-400 text-5xl"
                        >image</span
                        >
                        <img alt="product image" id="image-preview" style="width:48px;margin:auto;display:none" />
                        <div class="flex text-sm text-gray-600">
                            <label
                                class="relative cursor-pointer bg-white rounded-md font-medium text-[var(--background)] hover:text-[var(--background-dark)] focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-[var(--background)]"
                                for="{{ field.id_for_label }}"
                            >
                                <span>Upload a file</span>
                                <input
                                    class="sr-only"
                                    type="file"
                                    name="{{ field.name }}"
                                    id="{{ field.id_for_label }}"
                                /> 
                            </label>
                            <p class="pl-1">or drag and drop</p>
                        </div>
                        <p class="text-xs text-gray-500">
                            PNG, JPG, GIF up to 10MB
                        </p>
                    </div>
                </div>
                <p class="text-[var(--background-dark)]"> {{ field.errors.as_text }}</p>
            </div>
            {% elif field.field.widget.input_type == 'select' and field.name == 'category' %}
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" for="{{ field.id_for_label }}">
                    {{ field.label }}
                </label>
                <select 
                    class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-[var(--background)] focus:border-[var(--background)] text-gray-700 h-auto min-h-[42px]"
                    name="{{ field.name }}"
                    id="{{ field.id_for_label }}"
                >
                    {% for value, label in field.field.choices %}
                    <option value="{{ value }}" {% if value == field.value %}selected class="text-[var(--background)] bg-white focus:bg-white"{% endif %}>{{ label }}</option>
                    {% endfor %}
                </select>
                <p class="mt-1 text-xs text-gray-500">Hold Ctrl/Cmd to select multiple options</p>
                <p class="text-[var(--background-dark)]"> {{ field.errors.as_text }}</p>
            </div>

            {%else%}
            <div>
                <label
                    class="block text-sm font-medium text-gray-700 mb-1 checked:expand-underline"
                    for="productName"
                >{{field.label}}</label
                >

                <input
                    class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-[var(--background)] focus:border-[var(--background)]"
                    type="{{ field.field.widget.input_type }}"
                    name="{{ field.name }}"
                    id="{{ field.id_for_label }}"
                    value="{{ field.value|default_if_none:'' }}"
                />
                <p class="text-[var(--background-dark)]"> {{ field.errors.as_text }}</p>
            </div> 

            {% endif %} 
            {% endfor %} 

            <div class="pt-4 flex justify-end space-x-3">
                <a
                    class="px-6 py-2.5 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--background)]"
                    href="{% url 'product:list' %}"
                >
                    Cancel
                </a>
                <button
                    class="px-6 py-2.5 bg-[var(--background)] text-white rounded-lg text-sm font-medium hover:bg-[var(--background-dark)] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--background)]"
                    type="submit"
                >
                    Save Product
                </button>
            </div>
        </form>
    </div>
</main>
{% endblock content %}
